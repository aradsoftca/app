{"version":3,"file":"static/js/73.24228ce3.chunk.js","mappings":"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","sources":["pages/EmailPreferences.js","hooks/useDocumentTitle.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport api from '../services/api';\r\nimport useDocumentTitle from '../hooks/useDocumentTitle';\r\n\r\n/**\r\n * Email Preferences / Unsubscribe page\r\n * Accessible via /email-preferences?email=xxx\r\n * Required for CAN-SPAM compliance\r\n */\r\nconst EmailPreferences = () => {\r\n  useDocumentTitle('Email Preferences');\r\n  const [searchParams] = useSearchParams();\r\n  const email = searchParams.get('email') || '';\r\n  const [status, setStatus] = useState('loading'); // loading, ready, success, error\r\n  const [notifications, setNotifications] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!email) {\r\n      setStatus('ready');\r\n      return;\r\n    }\r\n    api.get('/api/email-preferences', { params: { email } })\r\n      .then(({ data }) => {\r\n        if (data.email_notifications !== undefined) {\r\n          setNotifications(data.email_notifications);\r\n        }\r\n        setStatus('ready');\r\n      })\r\n      .catch(() => setStatus('ready'));\r\n  }, [email]);\r\n\r\n  const handleUnsubscribe = async () => {\r\n    try {\r\n      const { data } = await api.post('/api/email-preferences', { email, unsubscribe: true });\r\n      if (data.success) {\r\n        setNotifications(false);\r\n        setStatus('success');\r\n      }\r\n    } catch {\r\n      setStatus('error');\r\n    }\r\n  };\r\n\r\n  const handleResubscribe = async () => {\r\n    try {\r\n      const { data } = await api.post('/api/email-preferences', { email, unsubscribe: false });\r\n      if (data.success) {\r\n        setNotifications(true);\r\n        setStatus('success');\r\n      }\r\n    } catch {\r\n      setStatus('error');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#0f0c29] via-[#302b63] to-[#24243e] p-5 font-sans\">\r\n      <div className=\"max-w-md w-full bg-[#1a1a2e] rounded-2xl p-10 shadow-2xl text-gray-300 text-center\">\r\n        <h1 className=\"text-3xl font-bold mb-2 text-indigo-400\">\r\n          Email Preferences\r\n        </h1>\r\n        <p className=\"text-gray-500 mb-6 text-sm\">\r\n          VPN XO — Manage your email notifications\r\n        </p>\r\n\r\n        {!email ? (\r\n          <p className=\"text-gray-400\">No email address provided.</p>\r\n        ) : status === 'loading' ? (\r\n          <div className=\"space-y-3 py-4\">\r\n            <div className=\"h-4 w-3/4 mx-auto bg-gray-700/30 rounded animate-pulse\" />\r\n            <div className=\"h-4 w-1/2 mx-auto bg-gray-700/30 rounded animate-pulse\" />\r\n            <div className=\"h-10 w-48 mx-auto bg-gray-700/30 rounded-lg animate-pulse mt-4\" />\r\n          </div>\r\n        ) : status === 'success' ? (\r\n          <div>\r\n            <div className={`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl text-white ${notifications ? 'bg-indigo-500' : 'bg-red-500'}`}>\r\n              {notifications ? '✓' : '✕'}\r\n            </div>\r\n            <h2 className=\"text-xl font-semibold mb-2\">\r\n              {notifications ? \"You're subscribed!\" : 'Unsubscribed'}\r\n            </h2>\r\n            <p className=\"text-gray-400 mb-5\">\r\n              {notifications\r\n                ? 'You will continue receiving email notifications.'\r\n                : 'You have been unsubscribed from email notifications.'}\r\n            </p>\r\n            <p className=\"text-gray-600 text-sm\">{email}</p>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <p className=\"mb-2\">\r\n              Email: <strong className=\"text-indigo-400\">{email}</strong>\r\n            </p>\r\n            <p className=\"text-gray-400 mb-6 text-sm\">\r\n              Notifications are currently{' '}\r\n              <strong className={notifications ? 'text-emerald-400' : 'text-red-400'}>\r\n                {notifications ? 'enabled' : 'disabled'}\r\n              </strong>\r\n            </p>\r\n\r\n            {notifications ? (\r\n              <button\r\n                onClick={handleUnsubscribe}\r\n                className=\"px-8 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold text-base transition-colors\"\r\n              >\r\n                Unsubscribe from Emails\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={handleResubscribe}\r\n                className=\"px-8 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg font-bold text-base transition-colors\"\r\n              >\r\n                Re-subscribe to Emails\r\n              </button>\r\n            )}\r\n\r\n            {status === 'error' && (\r\n              <p className=\"text-red-400 mt-4 text-sm\">\r\n                Something went wrong. Please try again.\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"mt-8 border-t border-gray-700 pt-4\">\r\n          <p className=\"text-gray-600 text-xs\">\r\n            VPN XO &bull;{' '}\r\n            <a href=\"https://vpn-xo.com\" className=\"text-indigo-400 hover:text-indigo-300 no-underline\">\r\n              vpn-xo.com\r\n            </a>\r\n            {' '}&bull;{' '}\r\n            <a href=\"/privacy-policy\" className=\"text-gray-500 hover:text-gray-400 underline\">\r\n              Privacy Policy\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailPreferences;\r\n","import { useEffect } from 'react';\r\n\r\n/**\r\n * Sets the document title for the current page.\r\n * Resets to default title on unmount.\r\n * @param {string} title - Page-specific title\r\n */\r\nconst useDocumentTitle = (title) => {\r\n  useEffect(() => {\r\n    const prev = document.title;\r\n    document.title = title ? `${title} | VPN XO` : 'VPN XO - Secure VPN Service';\r\n    return () => { document.title = prev; };\r\n  }, [title]);\r\n};\r\n\r\nexport default useDocumentTitle;\r\n"],"names":["EmailPreferences","useDocumentTitle","searchParams","useSearchParams","email","get","status","setStatus","useState","notifications","setNotifications","useEffect","api","params","then","_ref","data","undefined","email_notifications","catch","_jsx","className","children","_jsxs","concat","onClick","async","post","unsubscribe","success","_unused","_unused2","href","title","prev","document"],"sourceRoot":""}