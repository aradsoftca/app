"use strict";(self.webpackChunkvpn_xo_website=self.webpackChunkvpn_xo_website||[]).push([[194],{8194:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var r=t(5043),l=t(5369),a=t(8289),i=t(2835),c=t(4505),n=t(579);const d=()=>{const[e,s]=(0,r.useState)(null),[t,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{d(!0);const e=await c.Kp.getRevenuePredictions();s(e.data)}catch(e){console.error("Failed to load predictions:",e)}finally{d(!1)}};if(t)return(0,n.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,n.jsx)("div",{className:"spinner"}),(0,n.jsx)("span",{className:"ml-3 text-white",children:"Loading forecasts..."})]});const o=(null===e||void 0===e?void 0:e.churn)||(null===e||void 0===e?void 0:e.churn_prediction)||{},h=(null===e||void 0===e?void 0:e.revenue)||(null===e||void 0===e?void 0:e.revenue_forecast)||{},m=(null===e||void 0===e?void 0:e.predicted_churn_users)||[];return(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)(a.A,{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center",children:[(0,n.jsx)(l.YYR,{className:"mr-3 text-yellow-400"}),"Revenue Forecasting & Churn Prediction"]}),(0,n.jsx)(i.A,{variant:"outline",size:"sm",icon:(0,n.jsx)(l.DIg,{}),onClick:x,children:"Refresh"})]}),e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,n.jsxs)(a.A,{className:"p-5 bg-gradient-to-br from-green-600/20 to-green-800/20 border border-green-500/20",children:[(0,n.jsx)("p",{className:"text-green-200 text-sm mb-1",children:"Current MRR"}),(0,n.jsxs)("p",{className:"text-white text-2xl font-bold",children:["$",(h.current_mrr||h.mrr||0).toLocaleString()]})]}),(0,n.jsxs)(a.A,{className:"p-5 bg-gradient-to-br from-blue-600/20 to-blue-800/20 border border-blue-500/20",children:[(0,n.jsx)("p",{className:"text-blue-200 text-sm mb-1",children:"Predicted Next Month"}),(0,n.jsxs)("p",{className:"text-white text-2xl font-bold",children:["$",(h.predicted_next_month||h.forecast_30d||0).toLocaleString()]})]}),(0,n.jsxs)(a.A,{className:"p-5 bg-gradient-to-br from-yellow-600/20 to-yellow-800/20 border border-yellow-500/20",children:[(0,n.jsx)("p",{className:"text-yellow-200 text-sm mb-1",children:"Growth Rate"}),(0,n.jsxs)("p",{className:"text-white text-2xl font-bold flex items-center gap-2",children:[(h.growth_rate||0)>=0?(0,n.jsx)(l.uCC,{className:"text-green-400"}):(0,n.jsx)(l.$TP,{className:"text-red-400"}),Math.abs(h.growth_rate||0).toFixed(1),"%"]})]}),(0,n.jsxs)(a.A,{className:"p-5 bg-gradient-to-br from-red-600/20 to-red-800/20 border border-red-500/20",children:[(0,n.jsx)("p",{className:"text-red-200 text-sm mb-1",children:"Churn Risk"}),(0,n.jsxs)("p",{className:"text-white text-2xl font-bold",children:[o.at_risk_count||o.high_risk||0," users"]})]})]}),(0,n.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Churn Risk Overview"}),(0,n.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,n.jsxs)("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:[(0,n.jsx)("p",{className:"text-gray-400 text-sm",children:"Predicted Churn Rate"}),(0,n.jsxs)("p",{className:"text-white text-xl font-bold",children:[(o.churn_rate||0).toFixed(1),"%"]})]}),(0,n.jsxs)("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:[(0,n.jsx)("p",{className:"text-gray-400 text-sm",children:"Revenue at Risk"}),(0,n.jsxs)("p",{className:"text-white text-xl font-bold",children:["$",(o.revenue_at_risk||0).toLocaleString()]})]}),(0,n.jsxs)("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:[(0,n.jsx)("p",{className:"text-gray-400 text-sm",children:"Avg Lifetime Value"}),(0,n.jsxs)("p",{className:"text-white text-xl font-bold",children:["$",(h.avg_ltv||h.ltv||0).toFixed(2)]})]})]}),m.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Users at Risk of Churning"}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-gray-600 text-gray-400",children:[(0,n.jsx)("th",{className:"text-left py-3 px-2",children:"User"}),(0,n.jsx)("th",{className:"text-left py-3 px-2",children:"Risk Score"}),(0,n.jsx)("th",{className:"text-left py-3 px-2",children:"Days Since Active"}),(0,n.jsx)("th",{className:"text-left py-3 px-2",children:"Plan Expires"})]})}),(0,n.jsx)("tbody",{children:m.slice(0,20).map((e,s)=>(0,n.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,n.jsx)("td",{className:"py-3 px-2 text-white",children:e.email||e.user_id||"\u2014"}),(0,n.jsx)("td",{className:"py-3 px-2",children:(0,n.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat((e.risk_score||0)>70?"bg-red-500/20 text-red-300":(e.risk_score||0)>40?"bg-yellow-500/20 text-yellow-300":"bg-green-500/20 text-green-300"),children:[e.risk_score||0,"%"]})}),(0,n.jsx)("td",{className:"py-3 px-2 text-gray-300",children:e.days_inactive||"\u2014"}),(0,n.jsx)("td",{className:"py-3 px-2 text-gray-400 text-xs",children:e.subscription_end_date?new Date(e.subscription_end_date).toLocaleDateString():"\u2014"})]},e.id||s))})]})})]})]}):(0,n.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No forecast data available"})]})})}}}]);
//# sourceMappingURL=194.93b5e4de.chunk.js.map